# Форматы валидации summary

**ВАЛИДАЦИЯ SUMMARY ОТ АРХИТЕКТОРА (Phase 0.3):**
- ОБЯЗАТЕЛЬНО: FILE:path/to/file.py
- ОБЯЗАТЕЛЬНО: COORDINATE:line:number
- ОБЯЗАТЕЛЬНО: FUNCTION:function_name
- ОБЯЗАТЕЛЬНО: REASON с цитатами кода/логов (минимум 3-5 строк кода или точная цитата лога)
- ЗАПРЕЩЕНО: Принимать summary без всех полей
- ЗАПРЕЩЕНО: Принимать REASON без цитат кода/логов
- ЗАПРЕЩЕНО: Принимать REASON с общими фразами ("possible issue", "might be wrong")
- ЗАПРЕЩЕНО: Продолжать работу если формат неверный или REASON недостаточно подробный

**ЧЕК-ЛИСТ ВАЛИДАЦИИ REASON:**

1. **Наличие обратных кавычек (code blocks):**
   - ✅ Цитата кода должна быть оформлена как code block: ```language\nкод\n``` или `код`
   - ✅ Цитата лога должна быть оформлена как code block или в кавычках
   - ❌ ЗАПРЕЩЕНО: Принимать REASON без обратных кавычек в цитатах
   - ❌ ЗАПРЕЩЕНО: Принимать REASON где код/лог описан словами без цитаты
   - **Проверка:** REASON должен содержать минимум один code block (``` или `) или строку в кавычках

2. **Соответствие логам (если в описании проблемы есть лог ошибки):**
   - ✅ Если в описании проблемы упомянут лог ошибки (например, "IndexError: list index out of range" или "Timeout after 5 seconds")
   - ✅ RooTrace должен проверить, есть ли в REASON вхождение ключевых слов из этого лога
   - ✅ Ключевые слова: название ошибки (IndexError, Timeout, AttributeError и т.д.), ключевые фразы из сообщения
   - ❌ ЗАПРЕЩЕНО: Принимать REASON если в описании проблемы есть лог, но в REASON нет упоминания ключевых слов из этого лога
   - **Проверка:** Извлечь ключевые слова из лога ошибки (если есть) → проверить их наличие в REASON

**ВАЛИДАЦИЯ SUMMARY ОТ КОДЕРА (Phase 1.2, 7.4):**
- ОБЯЗАТЕЛЬНО: Список вставленных проб (H1: file:line)
- ОБЯЗАТЕЛЬНО: Результаты диагностики (OK/ERRORS/WARNINGS)
- ОБЯЗАТЕЛЬНО: Список .patch файлов
- ЗАПРЕЩЕНО: Принимать summary без подтверждения вставки проб
